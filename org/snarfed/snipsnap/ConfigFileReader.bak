package org.snarfed.snipsnap;
import java.util.*;
import java.io.*;


public class ConfigFileReader {
    
    String fileName;
    Properties props;
    
    public ConfigFileReader() {
        fileName=null;
        props=null;
    }
    
    
    
    public Properties readFile(String fileName) {
        String[] temp;
        temp = Utility.split(fileName,'/');        
        this.fileName = temp[temp.length-1];
        try {
            BufferedReader bF = new BufferedReader(new FileReader(fileName));
            props = new Properties();
            String line="";
            
            String key,value;
            while (bF.ready()) {
                line = bF.readLine();
                line = line.trim();
                if (line.startsWith("#")) continue;
                //if (line.startsWith(" ")) continue;
                if (line.equals("")) continue;
                temp = Utility.split(line,'=');
                
                key = temp[0].trim();
                value = "";
                
                for (int i=1;i<temp.length;i++)                
                    value+=temp[i];        
                value=value.trim();                
                props.setProperty(key,value);
            }
        }catch (IOException e) {e.printStackTrace();}
        return props;
    }
    
    public String getCurrFileName(){return fileName;}
    public Properties getProperties(){return props;}
    public String getProperty(String key) {
        if (props==null) return null;
        return props.getProperty(key);
    }
    
    public static void main (String[] args) {
        ConfigFileReader c = new ConfigFileReader();
        Properties p = c.readFile(args[0]);
        p.list(System.out);                
    }
}
